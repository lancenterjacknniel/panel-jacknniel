<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Login LAN Center</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>ğŸ” PANEL LAN CENTER JACKNNIEL</h1>

<div class="card">
  <h2>Ingreso</h2>

  <input id="user" placeholder="Correo operador">
  <input id="pass" type="password" placeholder="ContraseÃ±a">

  <button onclick="login()">Entrar</button>

  <p id="msg"></p>
</div>

<!-- âœ… Firebase compat -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>

<script>
  // CONFIG FIREBASE
  const firebaseConfig = {
    apiKey: "AIzaSyDhR3XZX9EG1sLuOvBefZ2EA5GVn8-SggQ",
    authDomain: "panel-jacknniel.firebaseapp.com",
    projectId: "panel-jacknniel",
    storageBucket: "panel-jacknniel.firebasestorage.app",
    messagingSenderId: "130186632575",
    appId: "1:130186632575:web:135d0352564c290d6d0e4a"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  function login() {

    let email = document.getElementById("user").value.trim();
    let pass  = document.getElementById("pass").value.trim();

    auth.signInWithEmailAndPassword(email, pass)
      .then((userCredential) => {

        // EMAIL REAL DEVUELTO POR FIREBASE
        let userEmail = userCredential.user.email;

        // GUARDAR USUARIO
        localStorage.setItem("user", userEmail);

        // âœ… ADMIN FIX DEFINITIVO
        if (userEmail.trim().toLowerCase() === "admin@lan.com") {
          localStorage.setItem("rol", "admin");
        } else {
          localStorage.setItem("rol", "operador");
        }

        // ENTRAR AL PANEL
        window.location.href = "panel.html";

      })
      .catch((error) => {
        document.getElementById("msg").innerText =
          "âŒ Usuario o contraseÃ±a incorrecta";
      });
  }
</script>

</body>
</html>
