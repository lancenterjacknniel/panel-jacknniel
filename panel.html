<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel LAN Center</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1 class="titulo">ğŸš€ PANEL LAN CENTER JACKNNIEL</h1>

<h2 id="rolTexto" class="rol"></h2>

<!-- ğŸ” ADMIN INFO -->
<div id="adminPanel" class="admin-box" style="display:none;">
  <h2>ğŸ” Admin: Subir QR desde GitHub</h2>

  <p>Para cambiar un QR solo reemplaza estos archivos en el repo:</p>

  <div class="files">
    <span>âœ… qr_banco.png</span>
    <span>âœ… qr_yasta.png</span>
  </div>

  <a class="btn-repo"
     href="https://github.com/lancenterjacknniel/panel-jacknniel"
     target="_blank">
     ğŸ‘‰ Ir al Repo y subir QR
  </a>
</div>

<hr>

<!-- ğŸ‘€ OPERADORES -->
<div class="grid">

  <!-- BANCO UNION -->
  <div class="card-pro">
    <h2>Banco UniÃ³n</h2>

<img id="imgBanco"
     class="qr-img"
     src="qr_banco.png"
     onclick="zoomQR('imgBanco')">


    <button class="btn-copy" onclick="copiarQR('qrBanco')">
      ğŸ“‹ Copiar QR
    </button>

    <button class="btn-download" onclick="descargarQR('qr_banco.png','BancoUnion')">
      â¬‡ Descargar
    </button>
  </div>

  <!-- YASTA -->
  <div class="card-pro">
    <h2>Yasta</h2>

<img id="imgYasta"
     class="qr-img"
     src="qr_yasta.png"
     onclick="zoomQR('imgYasta')">

    <button class="btn-copy" onclick="copiarQR('qrYasta')">
      ğŸ“‹ Copiar QR
    </button>

    <button class="btn-download" onclick="descargarQR('qr_yasta.png','Yasta')">
      â¬‡ Descargar
    </button>
  </div>

</div>

<br>

<button class="btn-salir" onclick="logout()">Salir</button>

<!-- âœ… FUNCIONES -->
<script>
  // Mostrar rol
  let rol = localStorage.getItem("rol");
  let user = localStorage.getItem("user");

  document.getElementById("rolTexto").innerText =
    "Usuario: " + user + " | Rol: " + rol;

  // Solo admin ve info
  if (rol === "admin") {
    document.getElementById("adminPanel").style.display = "block";
  }

  // ğŸ“‹ Copiar QR (copia el link)
  // ğŸ“‹ Copiar Imagen QR real
async function copiarQR(idImg) {

  let img = document.getElementById(idImg);

  try {
    // Descargar la imagen como blob
    const response = await fetch(img.src);
    const blob = await response.blob();

    // Copiar imagen al portapapeles
    await navigator.clipboard.write([
      new ClipboardItem({ [blob.type]: blob })
    ]);

    alert("âœ… Imagen QR copiada correctamente");

  } catch (error) {
    alert("âŒ No se pudo copiar la imagen (usa Chrome)");
  }
}

  // â¬‡ Descargar QR
  function descargarQR(archivo, nombre) {
    let a = document.createElement("a");
    a.href = archivo;
    a.download = nombre + ".png";
    a.click();
  }

 // âœ… Zoom dentro del panel (no pantalla completa)
function zoomQR(idImg) {
  let img = document.getElementById(idImg);
  img.classList.toggle("zoom");
}

  // ğŸšª Logout
  function logout() {
    localStorage.clear();
    window.location.href = "login.html";
  }
</script>

</body>
</html>

