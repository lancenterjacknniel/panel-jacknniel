<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel LAN Center</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- LOGO -->
<div class="top-logo">
  <img src="logo.png" class="logo">
</div>

<h1 class="titulo">PANEL LAN CENTER JACKNNIEL</h1>
<h2 id="rolTexto" class="rol"></h2>

<!-- ğŸ” ADMIN -->
<div id="adminPanel" class="admin-box" style="display:none;">
  <h2>ğŸ” Admin: Actualizar QR</h2>
  <p>Solo sube nuevas imÃ¡genes al repo con el mismo nombre:</p>

  <div class="files">
    <span>âœ… qr_banco.png</span>
    <span>âœ… qr_yasta.png</span>
    <span>âœ… qr_tigo.png</span>
    <span>âœ… qr_paypal.png</span>
  </div>

  <a class="btn-repo"
     href="https://github.com/lancenterjacknniel/panel-jacknniel"
     target="_blank">
     ğŸ‘‰ Subir QR al Repo
  </a>
</div>

<!-- TARJETAS -->
<div class="grid">

  <!-- BANCO UNION -->
  <div class="card-pro">
    <h2>Banco UniÃ³n</h2>
    <button onclick="mostrarQR('banco')" class="btn">Mostrar QR</button>

    <img id="qrBanco" class="qr-img" onclick="zoomQR(this)">
    <button onclick="copiarQR('qrBanco')" class="btn-copy">ğŸ“‹ Copiar QR</button>
  </div>

  <!-- YASTA -->
  <div class="card-pro">
    <h2>Yasta</h2>
    <button onclick="mostrarQR('yasta')" class="btn">Mostrar QR</button>

    <img id="qrYasta" class="qr-img" onclick="zoomQR(this)">
    <button onclick="copiarQR('qrYasta')" class="btn-copy">ğŸ“‹ Copiar QR</button>
  </div>

  <!-- TIGO MONEY -->
  <div class="card-pro">
    <h2>Tigo Money</h2>
    <button onclick="mostrarQR('tigo')" class="btn">Mostrar QR</button>

    <img id="qrTigo" class="qr-img" onclick="zoomQR(this)">
    <button onclick="copiarQR('qrTigo')" class="btn-copy">ğŸ“‹ Copiar QR</button>
  </div>

  <!-- PAYPAL -->
  <div class="card-pro">
    <h2>PayPal</h2>
    <button onclick="mostrarQR('paypal')" class="btn">Mostrar QR</button>

    <img id="qrPaypal" class="qr-img" onclick="zoomQR(this)">
    <button onclick="copiarQR('qrPaypal')" class="btn-copy">ğŸ“‹ Copiar QR</button>
  </div>

</div>

<!-- WHATSAPP -->
<div class="whatsapp">
  <button onclick="enviarWhatsApp()" class="btn-wsp">
    ğŸ“² Enviar WhatsApp
  </button>
</div>

<!-- SALIR -->
<div class="logout">
  <button onclick="logout()" class="btn-salir">
    ğŸšª Salir
  </button>
</div>

<script>
  // USUARIO
  let rol = localStorage.getItem("rol");
  let user = localStorage.getItem("user");

  document.getElementById("rolTexto").innerText =
    "Usuario: " + user + " | Rol: " + rol;

  if (rol === "admin") {
    document.getElementById("adminPanel").style.display = "block";
  }

  // MOSTRAR QR
  function mostrarQR(tipo) {

    let time = new Date().getTime();

    if (tipo === "banco") document.getElementById("qrBanco").src = "qr_banco.png?"+time;
    if (tipo === "yasta") document.getElementById("qrYasta").src = "qr_yasta.png?"+time;
    if (tipo === "tigo") document.getElementById("qrTigo").src = "qr_tigo.png?"+time;
    if (tipo === "paypal") document.getElementById("qrPaypal").src = "qr_paypal.png?"+time;
  }

  // ZOOM QR
  function zoomQR(img) {
    img.classList.toggle("zoom");
  }

  // COPIAR QR
  async function copiarQR(idImg) {
    const img = document.getElementById(idImg);

    const response = await fetch(img.src);
    const blob = await response.blob();

    await navigator.clipboard.write([
      new ClipboardItem({ [blob.type]: blob })
    ]);

    alert("âœ… QR Copiado correctamente");
  }

  // WHATSAPP
  function enviarWhatsApp() {
    let numero = "60772546";
    let mensaje = "Hola, aquÃ­ estÃ¡ el QR solicitado âœ…";

    window.open(
      "https://wa.me/" + numero + "?text=" + encodeURIComponent(mensaje),
      "_blank"
    );
  }

  // LOGOUT
  function logout() {
    localStorage.clear();
    window.location.href = "login.html";
  }
</script>

</body>
</html>
